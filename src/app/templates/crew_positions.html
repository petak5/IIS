{% extends 'base.html' %}

{% block header %}
{% endblock %}

{% block content %}
  <div class="container-fluid">
    <div class="row p-3">
      <div class="col">

        <h2>Operator <b>{{ g.operator.name }}</b>'s vehicle positions</h2>

        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Description</th>
              <th scope="col">Current Stop</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody>
          {% for vehicle in Vehicle.query.filter_by(operator=g.operator).order_by(Vehicle.id) %}
            <tr>
              <td scope="row">
                {{ vehicle.id }}
              </td>
              <td>
                {{ vehicle.description }}
              </td>
              <td>
                {% if vehicle.last_known_stop %}{{ vehicle.last_known_stop.name}}{% else %}<span class="badge bg-secondary">Unknown</span>{% endif %}
              </td>
              <td align="right" width="1%" nowrap>
                <a class="btn btn-warning" href="{{ url_for('crew_positions_unset', redir=url_for('crew_positions'), id=vehicle.id) }}">Unset Position</a>
                <a class="btn btn-primary" href="{{ url_for('crew_positions_set', redir=url_for('crew_positions'), id=vehicle.id) }}">Set Position</a>
              </td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
    </div>
  </div>
</div>
{% endblock %}
