<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">
<title>Projekt IIS</title>
<style type="text/css">
    table { border-collapse: collapse; }
    td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    dt { font-weight: bold; margin-top: 0.5em; }
</style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

<h1>3. Hromadná doprava</h1>

<dl>
  <dt>Autori</dt>
  <dd>Peter Mann
    <a href="mailto:xautor02@stud.fit.vutbr.cz">xmannp00@stud.fit.vutbr.cz</a> - frontend
  </dd>
  <dd>Peter Urgo¹
    <a href="mailto:xautor01@stud.fit.vutbr.cz">xurgos00@stud.fit.vutbr.cz</a> - backend
  </dd>
  <dd>Simon Lap¹anský
    <a href="mailto:xautor03@stud.fit.vutbr.cz">xlapsa01@stud.fit.vutbr.cz</a> - testovanie
  </dd>
  <dd>
  Èinnosti v tíme neboli pevne rozdelené a reprezentujú iba pribli¾né zameranie.
    </dd>
  <dt>URL aplikáce</dt>
  <dd><a href="http://iis.xdd.sk/">http://iis.xdd.sk/</a></dd>
</dl>

<h2>U¾ívatelia systému pre testovanie</h2>
<table>
  <tbody>
  <tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
  <tr><td>admin</td><td>admin</td><td>Administrátor</td></tr>
  <tr><td>operator</td><td>operator</td><td>Dopravca</td></tr>
  <tr><td>crew</td><td>crew</td><td>Personál</td></tr>
  <tr><td>user</td><td>user</td><td>Pou¾ivateµ</td></tr>
  </tbody>
</table>

<h2>Implementácia</h2>
<p>Vyu¾ívame framework Flask a ako ORM sqlalchemy</p>
<p>ORM model je v src/app/models/__init__.py</p>
<p>V¹etky prípady pou¾itia sú implementované v src/app/views/routes.py</p>
<p>Funkcie ktoré implementujú prípady pou¾itia pre admina majú predponu admin_<br>
operator_ pre dopravcu, crew_ pre personál, user_ pre pou¾ívateµa</p>
<p>src/app/static/ obsahuje 3 súbory tretích strán</p>
<ul>
  <li>jquery-3.6.0.min.js<br>Dostupné na: <a href="https://code.jquery.com/jquery-3.6.0.min.js">https://code.jquery.com/jquery-3.6.0.min.js</a></li>
  <li>bootstrap.min.css</li>
  <li>bootstrap.bundle.min.js<br>Dostupné v tomto archíve: <a href="https://github.com/twbs/bootstrap/releases/download/v5.1.3/bootstrap-5.1.3-dist.zip">https://github.com/twbs/bootstrap/releases/download/v5.1.3/bootstrap-5.1.3-dist.zip</a> </li>
</ul>
<p>src/app/templates/ obsahuje ¹ablóny ktoré pou¾ívame v routes.py na generovanie HTML</p>
<p>Session cookies rie¹ime pomocou funkcionality vstavanej vo Flask. Meno momentálne prihláseného pou¾ívateµa je udr¾iavané na klientovi a chránené kryptografickým podpisom.</p>

<h3>Databáza</h3>

<img src="ER.svg"/>

<h2>In¹talácia</h2>

<h4>Po¾iadavky</h4>
<ul>
  <li>Python3.9+</li>
  <li>pipenv</li>
  <li>Databáza (testované s PostgreSQL)</li>
</ul>

<h4>In¹talácia balíèkov</h4>
<ol>
  <li>`cd src/`</li>
  <li>`pipenv install` (run on first run or after Pipfile was changed)</li>
</ol>

<h4>Konfigurácia</h4>
<ol>
  <li>`cp .env_example .env`</li>
  <li>Upravte konfiguráciu v súbore .env</li>
</ol>

<h4>Vytvorenie tabuliek v databázi</h4>
<ol>
  <li>`pipenv shell`</li>
  <li>`flask db init`</li>
  <li>`flask db migrate`</li>
  <li>`flask db upgrade`</li>
  <li>`exit`</li>
</ol>
<p>Poznámka: Kroky 3 a 4 musia by» zopakované po ka¾dej zmene kódu db modelu</p>

<h4>Spustenie</h4>
<ol>
  <li>`pipenv run python run.py`</li>
  <li>Aplikácia je dostupná na adrese 127.0.0.1:5000</li>
</ol>

<h2>Známe problémy</h2>
<p>Rezervácia lístkov bez registrácie nie je podporená.</p>

</body>
</html>
